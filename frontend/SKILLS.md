# Skills（前端）- ai_face_change

版本：1.0

## 项目目标
- 这是一个通过浏览器作为 UI 界面实现的实时换脸程序。
- 前端在浏览器中集成 `checkpoints/` 目录下的 `rvm` 与 `depth` 两个模型，实现实时人像分割（用于前景/背景分离与后续合成链路）。

## 强约束（必须遵守）
- 环境：项目必须保持在 conda 的 `ai_face_change` 环境中。
- 目录：
  - 所有前端代码必须放在项目目录下的 `frontend/`。
  - 所有模型文件都必须放在项目目录下的 `checkpoints/`。
  - 所有后端程序和代码都必须放在项目目录下的 `blankend/`。

## 前端职责范围
- 浏览器 UI：摄像头/视频输入、预览、开关与参数控制、运行状态展示。
- 实时推理：加载与运行 `rvm` + `depth`，生成稳定的人像分割/抠图结果（mask/alpha）。
- 渲染合成：将分割结果应用于前景/背景合成（用于实时换脸链路）。
- 性能与稳定性：帧率/延迟可观测；出现性能压力时可降级（分辨率、帧率、模型策略）。

## 模型集成规范（浏览器侧）
- 模型文件只从 `checkpoints/` 加载，前端不得复制/移动模型到 `frontend/` 内。
- 当前仓库 `checkpoints/` 已包含示例模型文件：
  - `checkpoints/rvm_mobilenetv3_fp16.onnx`
  - `checkpoints/depth_anything_v2_vits_fp16.onnx`
- 模型加载路径、版本与切换策略应集中管理（避免散落硬编码）。

## 验收要点（DoD）
- 首次进入可正常申请摄像头权限并显示预览。
- 人像分割效果可用，边缘与抖动可通过参数控制。
- 运行过程中帧率与推理耗时可观测；长时间运行不出现明显资源泄漏。

